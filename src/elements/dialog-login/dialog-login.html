<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/firebase-element/firebase-auth.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../../bower_components/iron-icons/social-icons.html">

<dom-module id="dialog-login">
  <style is="custom-style">
    
  </style>
  <template>
    <firebase-auth id="firebaseLogin" location="https://u-swd-p1.firebaseio.com" params="{{params}}" user="{{user}}" status-known="{{statusKnown}}" provider="{{provider}}" on-error="errorHandler" on-login="loginHandler"></firebase-auth>
    <paper-dialog id="loginDialog" modal>
      <h2>Login</h2>
      <div>Dialog body</div>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button on-tap="loginGoogle">Google Login</paper-button>
      </div>
    </paper-dialog>
  </template>
  
  <script>
    Polymer({
      is: 'dialog-login',
      
      properties: {
        params: {
          type:Object,
          value: {
            scope: 'profile'
          }
        },
        
        provider: {
          type: String,
          value: 'anonymous'
        },
  
        user: {
          type: Object,
          value: null
        },
  
        statusKnown: {
          type: Boolean
        }
      },
      
      /**
       * Request password login
       *
       */
      login: function() {
        console.log('login with password');
        //this.provider = 'password';
        //this.$.firebaseLogin.login();
      },
      
      /**
       * Request Google SSO
       *
       */
      loginGoogle: function() {
          console.log('loginGoogle');
        this.provider = 'google';
        this.$.firebaseLogin.login();
      },
  
      errorHandler: function(e) {
        // 'Error: ' + e.detail.message;
      },
  
      loginHandler: function(e) {
        console.log('loginHandler', e);
        // e.type + ' success!';
      }
    });
  </script>
</dom-module>